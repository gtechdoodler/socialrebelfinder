(function(e){function t(t){for(var n,s,c=t[0],i=t[1],u=t[2],d=0,l=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&l.push(a[s][0]),a[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);p&&p(t);while(l.length)l.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},s={app:0},a={app:0},o=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-15bb7870":"8efc27b5","chunk-2d229491":"e9c36278","chunk-69ebe83e":"fef0cb35"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r={"chunk-15bb7870":1,"chunk-69ebe83e":1};s[e]?t.push(s[e]):0!==s[e]&&r[e]&&t.push(s[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-15bb7870":"4c8116a2","chunk-2d229491":"31d6cfe0","chunk-69ebe83e":"cfdd725b"}[e]+".css",a=i.p+n,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var u=o[c],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===n||d===a))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){u=l[c],d=u.getAttribute("data-href");if(d===n||d===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete s[e],p.parentNode.removeChild(p),r(o)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){s[e]=0})));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=o);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=c(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(p);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",l.name="ChunkLoadError",l.type=n,l.request=s,r[1](l)}a[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var p=d;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"07ed":function(e,t,r){"use strict";var n=r("1064"),s=r.n(n);s.a},1064:function(e,t,r){},4617:function(e,t,r){"use strict";var n=r("d6ac"),s=r.n(n);s.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("section",{staticClass:"app__header"},[r("b-container",[r("b-row",{staticClass:"app__row-header",attrs:{"align-h":"center"}},[r("b-col",{attrs:{lg:"8"}},[r("h3",{staticClass:"app__title"},[e._v("Social Rebel Finder")])])],1)],1)],1),r("v-appcontainer",{attrs:{id:"app-container"}}),r("v-mapmodal")],1)},a=[],o=(r("d3b7"),r("5530")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{staticClass:"app-container"},[r("b-row",{staticClass:"body",attrs:{"align-h":"center"}},[e.selectedAddress?e._e():r("b-col",{attrs:{lg:"8"}},[r("p",{staticClass:"app-container__explanation"},[e._v(" Inconsiderate folk, both young and old, continue to disobey the main man, Boris, and ignore "),r("span",{staticClass:"app-container__highlight"},[e._v("social distancing")]),e._v(" rules his government have laid out. Bring out your inner 'dirty rat' and report these flaming eediots. "),r("strong",[e._v("Where do they live?")])])]),r("b-col",{attrs:{lg:"8"}},[r("keep-alive",[e.selectedAddress?r("v-addressconfirmation"):r("v-addresssearch")],1)],1)],1)],1)},i=[],u=r("2f62"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"address-search"},[r("b-row",{staticClass:"address-search__row-header",attrs:{"align-h":"center"}},[r("b-col",[r("b-row",[r("b-col",{attrs:{sm:"8",md:"6"}},[r("v-postcodesearchbox",{ref:"searchBox",attrs:{label:"Postcode"}})],1)],1)],1)],1),e.resultsCount?r("b-row",{staticClass:"results",attrs:{"align-h":"center"}},[r("b-col",[r("v-addresscards")],1)],1):e._e()],1)},l=[],p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-searchbox",{ref:"searchBox",staticClass:"postcode-search-box",attrs:{placeholder:"Enter Postcode",maxlength:"8",validInput:e.isValidInput&&e.isValidSearch,feedback:e.feedback,showSpinner:e.isSearching},on:{keydown:[e.onInputKeyDown,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onInputKeyDownEnter(t)}],search:e.onSearch},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}})},f=[],h=(r("ac1f"),r("841c"),r("a926")),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-box"},[r("b-form-group",{attrs:{label:e.label}},[r("div",{staticClass:"search-box__flex-wrapper"},[r("b-form-input",e._g(e._b({ref:"searchInput",staticClass:"search-box__input",attrs:{type:"text",value:e.value}},"b-form-input",e.$attrs,!1),e.$listeners)),e.showSpinner?r("span",{staticClass:"spinner-border"}):r("b-icon-search",{staticClass:"search-box__search-icon",on:{click:function(t){return e.$emit("search")}}}),e.feedback?r("span",{class:["search-box__feedback",{"search-box__feedback--valid":e.validInput}]},[e._v(" "+e._s(e.feedback)+" ")]):e._e()],1)])],1)},m=[],g=(r("a9e3"),r("8226")),v=r("4797"),y={name:"SearchBox",inheritAttrs:!1,components:{"b-form-group":g["a"],"b-form-input":v["a"]},props:{label:{type:String},value:{type:[String,Number]},validInput:{type:Boolean},feedback:{type:String},showSpinner:{type:Boolean}},methods:{focus:function(){this.$refs.searchInput.focus()}}},_=y,S=(r("e7f3"),r("2877")),w=Object(S["a"])(_,b,m,!1,null,"0858b09c",null),x=w.exports,A={name:"PostcodeSearchBox",components:{"v-searchbox":x},data:function(){return{searchInput:"",isValidInput:!0,isValidSearch:!0}},computed:Object(o["a"])(Object(o["a"])({},Object(u["c"])("address",["isSearching"])),{},{feedback:function(){return this.isValidSearch?this.isValidInput?"":"Invalid postcode format":"Postcode not found"}}),methods:{focus:function(){this.$refs.searchBox.focus()},search:function(){var e=this;this.isValidInput=Object(h["b"])(this.searchInput),this.isValidInput&&this.$store.dispatch("address/search",{postcode:this.searchInput}).then((function(){e.searchInput=""})).catch((function(t){e.isValidSearch=!1,e.focus()}))},onInputKeyDown:function(e){this.isValidInput=!0,this.isValidSearch=!0},onInputKeyDownEnter:function(e){e.target&&e.target.blur&&e.target.blur(),this.search()},onSearch:function(){this.search()}}},C=A,k=Object(S["a"])(C,p,f,!1,null,null,null),O=k.exports,j={name:"AppContainer",components:{"v-addresscards":function(){return r.e("chunk-69ebe83e").then(r.bind(null,"bb22"))},"v-postcodesearchbox":O},mounted:function(){this.$refs.searchBox.focus()},computed:Object(o["a"])({},Object(u["c"])("address",["resultsCount"]))},E=j,I=(r("4617"),Object(S["a"])(E,d,l,!1,null,null,null)),N=I.exports,P={name:"AppContainer",components:{"v-addresssearch":N,"v-addressconfirmation":function(){return r.e("chunk-15bb7870").then(r.bind(null,"eb1b"))}},computed:Object(o["a"])({},Object(u["c"])("address",["selectedAddress"]))},T=P,B=(r("07ed"),Object(S["a"])(T,c,i,!1,null,"336df6bb",null)),V=B.exports,$={name:"App",components:{"v-appcontainer":V,"v-mapmodal":function(){return r.e("chunk-2d229491").then(r.bind(null,"dd94"))}},watch:{errorMessage:function(e){var t=this;e&&this.$bvModal.msgBoxOk("An error occurred: ".concat(e)).then((function(){t.$store.dispatch("error/clear")}))}},computed:Object(o["a"])({},Object(u["c"])("error",["errorMessage"]))},D=$,M=(r("5c0b"),Object(S["a"])(D,s,a,!1,null,null,null)),R=M.exports,q=(r("f9e3"),r("2dd8"),r("498a")),L=r("dbbe"),G=r("b1e0"),K=(r("5319"),r("96cf"),r("1da1")),F="https://api.getAddress.io/find/{0}?api-key=2hVvI_2f9UmF1zX0s9YUnA26987&expand=true",H="https://api.postcodes.io/postcodes/{0}/validate",U={GET_ADDRESS_SEARCH:F,GET_POSTCODE_VALIDATION:H},J=(r("7db0"),[]),Y=function(e){var t=e.status,r=e.message;J.push({status:t,message:r})},z=function(e){return J.find((function(t){var r=t.status;return r==e}))},W=r("bc3a"),X=r.n(W),Q=function(e,t){return X.a.get(e)},Z={get:Q},ee=function(e){return e&&e.response&&e.response.data&&e.response.data.Message?e.response.data.Message:"An error occurred"},te=function(){var e=Object(K["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.get(t,r);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e["catch"](0),n=z(e.t0.response.status),Pe.commit("error/log",n?n.message:ee(e.t0)),e.abrupt("return",Promise.reject(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),re={get:te},ne=(r("4160"),r("159b"),r("53ca")),se={mapEntity:function(e){var t={};return t.buildingName=e.building_name,t.buildingNumber=e.building_number,t.street=e.thoroughfare,t.locality=e.locality,t.town=e.town_or_city,t.county=e.county,t.getFullAddressString=function(){return Object(h["a"])([this.buildingNumber,this.buildingName,this.street,this.locality,this.town,this.county])},t},mapCol:function(e){var t=this;if(!e||"object"!==Object(ne["a"])(e))throw"Error in apiGetAddressMapper: Expecting not null object";if(!Array.isArray(e.addresses))throw"Error in apiGetAddressMapper: Expecting source array, but received ".concat(Object(ne["a"])(e));var r={};return r.postcode=e.postcode,r.addressCol=[],e.addresses.forEach((function(n){var s=t.mapEntity(n);r.postcode=e.postcode,s.coordinates=[e.longitude,e.latitude],r.addressCol.push(s)})),r}},ae=function(){var e=Object(K["a"])(regeneratorRuntime.mark((function e(t,r){var n,s,a,o,c,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,s=r.postcode,a=U.GET_POSTCODE_VALIDATION.replace("{0}",s),o=U.GET_ADDRESS_SEARCH.replace("{0}",s),n("isSearching",!0),e.prev=5,n("requestPostcode",s),e.next=9,re.get(a);case 9:if(c=e.sent,c.data.result){e.next=12;break}return e.abrupt("return",Promise.reject("Postcode does not exist"));case 12:return e.next=14,re.get(o);case 14:i=e.sent,u=se.mapCol(i.data),n("mappedResults",ue(u)),e.next=21;break;case 19:e.prev=19,e.t0=e["catch"](5);case 21:return e.prev=21,n("isSearching",!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[5,19,21,24]])})));return function(t,r){return e.apply(this,arguments)}}(),oe=function(e,t){var r=e.commit;r("selectedAddress",t)},ce=function(e){var t=e.commit;t("selectedAddress",null)},ie=function(e){var t=e.commit;t("reset")},ue=function(e){return e&&Array.isArray(e.addressCol)&&e.addressCol.sort((function(e,t){if(e.locality===t.locality){if(e.street===t.street){if(e.buildingNumber===t.buildingNumber)return e.buildingName===t.buildingName?0:e.buildingName<t.buildingName?-1:1;var r=parseInt(e.buildingNumber),n=parseInt(t.buildingNumber);return isNaN(r)||isNaN(n)?e.buildingNumber<t.buildingNumber?-1:1:r<n?-1:1}return e.street<t.street?-1:1}return e.locality<t.locality?-1:1})),e},de={search:ae,addSelectedAddress:oe,removeSelectedAddress:ce,reset:ie},le=function(e,t){e.isSearching=t},pe=function(e,t){e.requestPostcode=t},fe=function(e,t){t&&t.addressCol&&t.addressCol.length&&(e.mappedResults=t,e.resultsCount=t.addressCol.length)},he=function(e,t){e.selectedAddress=t},be=function(e){e.isSearching=!1,e.requestPostcode="",e.mappedResults=null,e.resultsCount=0,e.selectedAddress=null},me={isSearching:le,requestPostcode:pe,mappedResults:fe,selectedAddress:he,reset:be},ge={isSearching:!1,requestPostcode:"",mappedResults:null,resultsCount:0,selectedAddress:null},ve={namespaced:!0,actions:de,mutations:me,state:function(){return ge}},ye=function(e){var t=e.commit;t("clear")},_e={clear:ye},Se=function(e){e.errorMessage=""},we=function(e,t){e.errorMessage=t},xe={clear:Se,log:we},Ae={errorMessage:""},Ce={actions:_e,mutations:xe,namespaced:!0,state:function(){return Ae}},ke=function(e){return e.coordinates},Oe={coordinates:ke},je=function(e,t){var r=t.addressString,n=t.coordinates;e.fullAddressString=r,e.coordinates=n},Ee={address:je},Ie={fullAddressString:"",coordinates:[0,0]},Ne={getters:Oe,mutations:Ee,namespaced:!0,state:function(){return Ie}};Y({status:"400",message:"There was a problem with the address service."}),Y({status:"404",message:"There was a problem finding the address service."}),Y({status:"429",message:"Your allocated number of address searches has been exceeded."}),n["a"].use(u["a"]);var Pe=new u["a"].Store({modules:{address:ve,error:Ce,mapStore:Ne}}),Te=(r("2b69"),r("1cf8")),Be=r("1dce"),Ve=r.n(Be);n["a"].config.productionTip=!1,n["a"].use(q["a"]),n["a"].use(L["a"]),n["a"].use(G["a"]),n["a"].use(Te["a"]),n["a"].use(Ve.a),new n["a"]({store:Pe,render:function(e){return e(R)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),s=r.n(n);s.a},"9c0c":function(e,t,r){},a926:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o}));r("4de4"),r("a15b");var n=r("8bb3"),s=r.n(n),a=function(e){return Array.isArray(e)?e.filter(Boolean).join(", "):""},o=function(e){return null!=e&&s.a.isValid(e)}},d6ac:function(e,t,r){},db32:function(e,t,r){},e7f3:function(e,t,r){"use strict";var n=r("db32"),s=r.n(n);s.a}});
//# sourceMappingURL=app.5a93cf63.js.map